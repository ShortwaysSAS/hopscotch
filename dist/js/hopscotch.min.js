/**! shortways-hopscotch - v0.2.7a
*
* Copyright 2017 LinkedIn Corp. All rights reserved.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/
var Shortcuts4Js;!function(a){!function(b){"use strict";if("object"==typeof exports)module.exports=b();else{var c="hopscotch";if(a[c])return;a[c]=b()}}(function(){function a(a,b,c,d){function e(a){b._scrollSettings=null,b.parentElement&&b.parentElement._scrollSettings&&b.parentElement._scrollSettings.end(a),d(a),b.removeEventListener("touchstart",f,{passive:!0})}var f,g=!b._scrollSettings,h=b._scrollSettings,i=Date.now();h&&h.end(C),b._scrollSettings={startTime:h?h.startTime:Date.now(),endIterations:0,target:a,time:c.time+(h?i-h.startTime:0),ease:c.ease,align:c.align,end:e},f=e.bind(null,C),b.addEventListener("touchstart",f,{passive:!0}),g&&e(B)}function b(a){return"pageXOffset"in a||(a.scrollHeight!==a.clientHeight||a.scrollWidth!==a.clientWidth)&&"hidden"!==getComputedStyle(a).overflow}function c(){return!0}var d,e,f,g,h,i,j,k,l,m,n,o,p,q="bubble_default",r=window.Sizzle||null,s="undefined",t=!1,u=Shortcuts4Js.jQuery||window.jQuery||window.$&&window.$.fn,v=Shortcuts4Js.jQuery||window.jQuery||window.$,w=!1,x=!1,y=window.document,z=/^[a-zA-Z]+[a-zA-Z0-9_-]*$/,A={left:"right",right:"left"},B="complete",C="canceled";try{typeof window.sessionStorage!==s&&(w=!0,sessionStorage.setItem("hopscotch.test.storage","ok"),sessionStorage.removeItem("hopscotch.test.storage"),x=!0)}catch(D){}return o={smoothScroll:!0,scrollDuration:1e3,scrollTopMargin:200,showCloseButton:!0,showPrevButton:!1,showNextButton:!0,bubbleWidth:280,bubblePadding:15,arrowWidth:20,skipIfNoElement:!1,isRtl:!1,cookieName:"hopscotch.tour.state"},Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),n=function(){t&&p.startTour()},k={addClass:function(a,b){var c,d,e,f;if(a.className){for(d=b.split(/\s+/),c=" "+a.className+" ",e=0,f=d.length;f>e;++e)c.indexOf(" "+d[e]+" ")<0&&(c+=d[e]+" ");a.className=c.replace(/^\s+|\s+$/g,"")}else a.className=b},removeClass:function(a,b){var c,d,e,f;for(d=b.split(/\s+/),c=" "+a.className+" ",e=0,f=d.length;f>e;++e)c=c.replace(" "+d[e]+" "," ");a.className=c.replace(/^\s+|\s+$/g,"")},hasClass:function(a,b){var c;return a.className?(c=" "+a.className+" ",-1!==c.indexOf(" "+b+" ")):!1},getPixelValue:function(a){var b=typeof a;return"number"===b?a:"string"===b?parseInt(a,10):0},valOrDefault:function(a,b){return typeof a!==s?a:b},invokeCallbackArrayHelper:function(a){var b;return Array.isArray(a)&&(b=m[a[0]],"function"==typeof b)?b.apply(this,a.slice(1)):void 0},invokeCallbackArray:function(a){var b,c;if(Array.isArray(a)){if("string"==typeof a[0])return k.invokeCallbackArrayHelper(a);for(b=0,c=a.length;c>b;++b)k.invokeCallback(a[b])}},invokeCallback:function(a){return"function"==typeof a?a():"string"==typeof a&&m[a]?m[a]():k.invokeCallbackArray(a)},invokeEventCallbacks:function(a,b){var c,d,e=l[a];if(b)return this.invokeCallback(b);for(c=0,d=e.length;d>c;++c)this.invokeCallback(e[c].cb)},getScrollTop:function(){var a;return a=typeof window.pageYOffset!==s?window.pageYOffset:y.documentElement.scrollTop},getIframeScrollTop:function(a){var b=k.splitTargetChain(a),c=v(b[0]).contents().find("html, body");return c.scrollTop()},getScrollLeft:function(){var a;return a=typeof window.pageXOffset!==s?window.pageXOffset:y.documentElement.scrollLeft},getWindowHeight:function(){return window.innerHeight||y.documentElement.clientHeight},addEvtListener:function(a,b,c){return a?a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent("on"+b,c):void 0},removeEvtListener:function(a,b,c){return a?a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent("on"+b,c):void 0},documentIsReady:function(){return"complete"===y.readyState},evtPreventDefault:function(a){a.preventDefault?a.preventDefault():event&&(event.returnValue=!1)},extend:function(a,b){var c;for(c in b)b.hasOwnProperty(c)&&(a[c]=b[c])},getStepTargetHelper:function(a){var b=y.getElementById(a);if(b)return b;if(u){var c=this.splitTargetChain(a);b=v(c[0]);for(var d=1;d<c.length;d++)b=b.contents().find(c[d]);return b.length?b[0]:null}if(r)return b=new r(a),b.length?b[0]:null;if(y.querySelector)try{return y.querySelector(a)}catch(e){}return/^#[a-zA-Z][\w-_:.]*$/.test(a)?y.getElementById(a.substring(1)):null},getStepTarget:function(a){var b;if(!a||!a.target)return null;if("string"==typeof a.target)return k.getStepTargetHelper(a.target);if(Array.isArray(a.target)){var c,d;for(c=0,d=a.target.length;d>c;c++)if("string"==typeof a.target[c]&&(b=k.getStepTargetHelper(a.target[c])))return b;return null}return a.target},getI18NString:function(a){return h[a]||g[a]},setState:function(a,b,c){var d,e="";if(w&&x)try{sessionStorage.setItem(a,b)}catch(f){x=!1,this.setState(a,b,c)}else w&&sessionStorage.removeItem(a),c&&(d=new Date,d.setTime(d.getTime()+24*c*60*60*1e3),e="; expires="+d.toGMTString()),y.cookie=a+"="+b+e+"; path=/"},getState:function(a){var b,c,d,e=a+"=",f=y.cookie.split(";");if(w&&(d=sessionStorage.getItem(a)))return d;for(b=0;b<f.length;b++){for(c=f[b];" "===c.charAt(0);)c=c.substring(1,c.length);if(0===c.indexOf(e)){d=c.substring(e.length,c.length);break}}return d},clearState:function(a){w?sessionStorage.removeItem(a):this.setState(a,"",-1)},normalizePlacement:function(a){!a.placement&&a.orientation&&(a.placement=a.orientation)},flipPlacement:function(a){if(a.isRtl&&!a._isFlipped){var b,c,d=["orientation","placement"];a.xOffset&&(a.xOffset=-1*this.getPixelValue(a.xOffset));for(c in d)b=d[c],a.hasOwnProperty(b)&&A.hasOwnProperty(a[b])&&(a[b]=A[a[b]]);a._isFlipped=!0}},actualOffset:function(a){var b=a.offset();if(a.is("iframe")){var c=window.getComputedStyle(a[0]),d=a.contents();b.top+=(parseInt(c.borderTopWidth,10)||0)+(parseInt(c.paddingTop,10)||0)-d.scrollTop(),b.left+=(parseInt(c.borderLeftWidth,10)||0)+(parseInt(c.paddingLeft,10)||0)-d.scrollLeft()}return b},calcIframeElmtAbsoluteOffset:function(a){for(var b=this.splitTargetChain(a),c=v(b[0]),d=this.actualOffset(c),e=1;e<b.length-1;e++){c=c.contents().find(b[e]);var f=this.actualOffset(c);d.top+=f.top,d.left+=f.left}return d},splitTargetChain:function(a){return a.split("//://").map(function(a){return a.replace(":contains(",':not([class^="hopscotch-bubble"]):contains(')})},isTargetElmtOnRoot:function(a){return a.ownerDocument.defaultView.self===window.top},scrollIntoView:function(d,e,f){function g(a){i--,i||f&&f(a)}if(d){"function"==typeof e&&(f=e,e=null),e||(e={}),e.time=isNaN(e.time)?1e3:e.time,e.ease=e.ease||function(a){return 1-Math.pow(1-a,a/2)};for(var h=d.parentElement,i=0,j=e.validTarget||c,k=e.isScrollable;h;){if(j(h,i)&&(k?k(h,b):b(h))&&(i++,a(d,h,e,g)),h=h.parentElement,!h)return;("BODY"===h.tagName||"HTML"===h.tagName)&&(h=h.ownerDocument,h=h.defaultView||h.ownerWindow)}}},isVisible:function(a){return u?v(a).is(":visible"):null!==a.offsetParent},elementInViewport:function(a){for(var b=a.offsetTop,c=a.offsetLeft,d=a.offsetWidth,e=a.offsetHeight;a.offsetParent;)a=a.offsetParent,b+=a.offsetTop,c+=a.offsetLeft;return b>=window.pageYOffset&&c>=window.pageXOffset&&b+e<=window.pageYOffset+window.innerHeight&&c+d<=window.pageXOffset+window.innerWidth}},k.addEvtListener(window,"load",n),l={next:[],prev:[],start:[],end:[],show:[],error:[],close:[]},m={},g={stepNums:null,nextBtn:"Next",prevBtn:"Back",doneBtn:"Done",skipBtn:"Skip",closeTooltip:"Close"},h={},e=function(a){this.init(a)},e.prototype={isShowing:!1,currStep:void 0,setPosition:function(a){function b(){return a.isRtl?f.right-e:f.left}function c(){var a=window.getComputedStyle(j);return f.top+parseFloat(a.paddingTop)+parseFloat(a.borderTopWidth)-22}var d,e,f,g,h,i,j=k.getStepTarget(a),l=this.element,m=this.arrowEl,n=a.isRtl?"right":"left";if(j){k.flipPlacement(a),k.normalizePlacement(a),k.removeClass(l,"fade-in-down fade-in-up fade-in-left fade-in-right"),"AREA"===j.tagName?(e=d=0,f={top:0,right:0,bottom:0,left:0,height:0,width:0,x:0,y:0}):(e=l.offsetWidth,d=l.offsetHeight,f=j.getBoundingClientRect());window.getComputedStyle(j);switch(a.placement){case"top":g=f.top-d-this.opt.arrowWidth,h=b();break;case"bottom":g=f.bottom+this.opt.arrowWidth,h=b();break;case"left":g=c(),h=f.left-e-this.opt.arrowWidth;break;case"right":g=c(),h=f.right+this.opt.arrowWidth;break;default:throw new Error("Bubble placement failed because step.placement is invalid or undefined!")}i="center"!==a.arrowOffset?k.getPixelValue(a.arrowOffset):a.arrowOffset,"top"===a.placement||"bottom"===a.placement?("top"===a.placement?(m.style.top="",m.style.bottom="-39px"):(m.style.top="-22px",m.style.bottom=""),i?"center"===i?m.style[n]=Math.floor(e/2-m.offsetWidth/2)+"px":i&&(m.style[n]=i+"px"):m.style.left="10px"):("left"===a.placement||"right"===a.placement)&&("left"===a.placement?(m.style.left="",m.style.right="-39px"):(m.style.left="-22px",m.style.right=""),i?"center"===i?m.style.top=Math.floor(d/2-m.offsetHeight/2)+"px":i&&(m.style.top=i+"px"):m.style.top="10px");var o=k.isTargetElmtOnRoot(j)?{top:0,bottom:0,left:0,right:0}:k.calcIframeElmtAbsoluteOffset(a.target);"center"===a.xOffset?h=f.left+j.offsetWidth/2-e/2:h+=k.getPixelValue(a.xOffset)+o.left,"center"===a.yOffset?g=f.top+j.offsetHeight/2-d/2:g+=k.getPixelValue(a.yOffset)+o.top,!a.fixedElement&&k.isTargetElmtOnRoot(j)?(g+=k.getScrollTop(),h+=k.getScrollLeft()):a.fixedElement||(g+=k.getIframeScrollTop(a.target)),l.style.position=a.fixedElement?"fixed":"absolute",l.style.top=g+"px",l.style.left=h+"px"}},render:function(a,b,c){var d,e,f,g,h,j,l,m,n,o,r=this.element;if(a?this.currStep=a:this.currStep&&(a=this.currStep),this.opt.isTourBubble?(g=p.getCurrTour(),g&&(e=g.customData,d=g.customRenderer,a.isRtl=a.hasOwnProperty("isRtl")?a.isRtl:g.hasOwnProperty("isRtl")?g.isRtl:this.opt.isRtl,f=g.unsafe,Array.isArray(g.steps)&&(h=g.steps.length,j=this._getStepI18nNum(this._getStepNum(h-1)),m=this._getStepNum(b)===this._getStepNum(h-1)))):(e=a.customData,d=a.customRenderer,f=a.unsafe,a.isRtl=a.hasOwnProperty("isRtl")?a.isRtl:this.opt.isRtl),l=m?k.getI18NString("doneBtn"):a.showSkip?k.getI18NString("skipBtn"):k.getI18NString("nextBtn"),k.flipPlacement(a),k.normalizePlacement(a),this.placement=a.placement,o={i18n:{prevBtn:k.getI18NString("prevBtn"),nextBtn:l,closeTooltip:k.getI18NString("closeTooltip"),stepNum:this._getStepI18nNum(this._getStepNum(b)),numSteps:j},buttons:{showPrev:k.valOrDefault(a.showPrevButton,this.opt.showPrevButton)&&this._getStepNum(b)>0,showNext:k.valOrDefault(a.showNextButton,this.opt.showNextButton),showCTA:k.valOrDefault(a.showCTAButton&&a.ctaLabel,!1),ctaLabel:a.ctaLabel,showClose:k.valOrDefault(this.opt.showCloseButton,!0)},step:{num:b,isLast:k.valOrDefault(m,!1),title:a.title||"",content:a.content||"",isRtl:a.isRtl,placement:a.placement,padding:k.valOrDefault(a.padding,this.opt.bubblePadding),width:k.getPixelValue(a.width)||this.opt.bubbleWidth,customData:a.customData||{}},tour:{isTour:this.opt.isTourBubble,numSteps:h,unsafe:k.valOrDefault(f,!1),customData:e||{}}},"function"==typeof d)r.innerHTML=d(o);else if("string"==typeof d){if(!p.templates||"function"!=typeof p.templates[d])throw new Error('Bubble rendering failed - template "'+d+'" is not a function.');r.innerHTML=p.templates[d](o)}else if(i)r.innerHTML=i(o);else{if(!p.templates||"function"!=typeof p.templates[q])throw new Error('Bubble rendering failed - template "'+q+'" is not a function.');r.innerHTML=p.templates[q](o)}for(var s,t=r.children,u=t.length,n=0;u>n;n++)s=t[n],k.hasClass(s,"hopscotch-arrow")&&(this.arrowEl=s);return r.style.zIndex="number"==typeof a.zindex?a.zindex:"",this._setArrow(a.placement),this.hide(!1),this.setPosition(a),c&&c(!a.fixedElement),this},_getStepNum:function(a){var b,c,d=0,e=p.getSkippedStepsIndexes(),f=e.length;for(c=0;f>c;c++)b=e[c],a>b&&d++;return a-d},_getStepI18nNum:function(a){var b=k.getI18NString("stepNums");return b&&a<b.length?a=b[a]:a+=1,a},_setArrow:function(a){k.removeClass(this.arrowEl,"down up right left"),"top"===a?k.addClass(this.arrowEl,"down"):"bottom"===a?k.addClass(this.arrowEl,"up"):"left"===a?k.addClass(this.arrowEl,"right"):"right"===a&&k.addClass(this.arrowEl,"left")},_getArrowDirection:function(){return"top"===this.placement?"down":"bottom"===this.placement?"up":"left"===this.placement?"right":"right"===this.placement?"left":void 0},show:function(){var a=this,b="fade-in-"+this._getArrowDirection(),c=1e3;return k.removeClass(this.element,"hide"),k.addClass(this.element,b),setTimeout(function(){k.removeClass(a.element,"invisible")},50),setTimeout(function(){k.removeClass(a.element,b)},c),this.isShowing=!0,this},hide:function(a){var b=this.element;return a=k.valOrDefault(a,!0),b.style.top="",b.style.left="",a?(k.addClass(b,"hide"),k.removeClass(b,"invisible")):(k.removeClass(b,"hide"),k.addClass(b,"invisible")),k.removeClass(b,"animate fade-in-up fade-in-down fade-in-right fade-in-left"),this.isShowing=!1,this},destroy:function(){var a=this.element;a&&a.parentNode.removeChild(a),k.removeEvtListener(a,"click",this.clickCb)},_handleBubbleClick:function(a){function b(c){return c===a.currentTarget?null:k.hasClass(c,"hopscotch-cta")?"cta":k.hasClass(c,"hopscotch-next")?"next":k.hasClass(c,"hopscotch-prev")?"prev":k.hasClass(c,"hopscotch-close")?"close":b(c.parentElement)}var c;a=a||window.event;var d=a.target||a.srcElement;if(c=b(d),"cta"===c)this.opt.isTourBubble||p.getCalloutManager().removeCallout(this.currStep.id),this.currStep.onCTA&&k.invokeCallback(this.currStep.onCTA);else if("next"===c)p.nextStep(!0);else if("prev"===c)p.prevStep(!0);else if("close"===c){if(this.opt.isTourBubble){var e=p.getCurrStepNum(),f=p.getCurrTour(),g=e===f.steps.length-1;k.invokeEventCallbacks("close"),p.endTour(!0,g)}else this.opt.onClose&&k.invokeCallback(this.opt.onClose),this.opt.id&&!this.opt.isTourBubble?p.getCalloutManager().removeCallout(this.opt.id):this.destroy();k.evtPreventDefault(a)}},init:function(a){var b,c,d,e,f=y.createElement("div"),g=this,h=!1;this.element=f,e={showPrevButton:o.showPrevButton,showNextButton:o.showNextButton,bubbleWidth:o.bubbleWidth,bubblePadding:o.bubblePadding,arrowWidth:o.arrowWidth,isRtl:o.isRtl,showNumber:!0,isTourBubble:!0},a=typeof a===s?{}:a,k.extend(e,a),this.opt=e,f.className="hopscotch-bubble animated",e.isTourBubble?(d=p.getCurrTour(),d&&k.addClass(f,"tour-"+d.id)):k.addClass(f,"hopscotch-callout no-number"),b=function(){!h&&g.isShowing&&(h=!0,setTimeout(function(){g.setPosition(g.currStep),h=!1},100))},k.addEvtListener(window,"resize",b),this.clickCb=function(a){g._handleBubbleClick(a)},k.addEvtListener(f,"click",this.clickCb),this.hide(),k.documentIsReady()?y.body.appendChild(f):(y.addEventListener?(c=function(){y.removeEventListener("DOMContentLoaded",c),window.removeEventListener("load",c),y.body.appendChild(f)},y.addEventListener("DOMContentLoaded",c,!1)):(c=function(){"complete"===y.readyState&&(y.detachEvent("onreadystatechange",c),window.detachEvent("onload",c),y.body.appendChild(f))},y.attachEvent("onreadystatechange",c)),k.addEvtListener(window,"load",c))}},f=function(){var a={},b={};this.createCallout=function(c){var d;if(!c.id)throw new Error("Must specify a callout id.");if(!z.test(c.id))throw new Error("Callout ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");if(a[c.id])throw new Error("Callout by that id already exists. Please choose a unique id.");if(!k.getStepTarget(c))throw new Error("Must specify existing target element via 'target' option.");return c.showNextButton=c.showPrevButton=!1,c.isTourBubble=!1,d=new e(c),a[c.id]=d,b[c.id]=c,d.render(c,null,function(){d.show(),c.onShow&&k.invokeCallback(c.onShow)}),d},this.getCallout=function(b){return a[b]},this.removeAllCallouts=function(){var b;for(b in a)a.hasOwnProperty(b)&&this.removeCallout(b)},this.removeCallout=function(c){var d=a[c];a[c]=null,b[c]=null,d&&d.destroy()},this.refreshCalloutPositions=function(){var c,d,e;for(c in a)if(a.hasOwnProperty(c)&&b.hasOwnProperty(c)&&(d=a[c],e=b[c],d&&e)){var f=k.getStepTarget(e);f&&k.isVisible(f)?(d.show(),d.setPosition(e)):d.hide()}}},d=function(a){var b,c,d,g,n,r,w,x,A,B={},C=[],D=function(a){return b&&b.element&&b.element.parentNode||(b=new e(d)),a&&k.extend(b.opt,{bubblePadding:F("bubblePadding"),bubbleWidth:F("bubbleWidth"),showNextButton:F("showNextButton"),showPrevButton:F("showPrevButton"),showCloseButton:F("showCloseButton"),arrowWidth:F("arrowWidth"),isRtl:F("isRtl")}),b},E=function(){b&&(b.destroy(),b=null)},F=function(a){return"undefined"==typeof d?o[a]:k.valOrDefault(d[a],o[a])},G=function(){var a;return a=!g||n||0>r||r>=g.steps.length?null:g.steps[r]},H=function(a){if(u){const b=G(),c=k.getStepTarget(b),d=!!y.documentMode;if(d&&F("compatMode")){const e="top"===b.placement;c.scrollIntoView(!e);const f=v(c).position(),g=f.top<window.innerHeight/1.5,h=f.top>y.body.offsetHeight-window.innerHeight/1.2,i=!g&&!h||e&&h||!e&&g;a(),i&&window.scrollBy(0,e?window.innerHeight/2:window.innerHeight/-2)}else k.scrollIntoView(c,a)}},I=function(a,b){var c,d,e;r+a>=0&&r+a<g.steps.length?(r+=a,d=G(),e=function(){c=k.getStepTarget(d),c?(B[r]&&delete B[r],b(r)):(B[r]=!0,k.invokeEventCallbacks("error"),I(a,b))},d.delay?setTimeout(e,d.delay):e()):b(-1)},J=function(a,b){var c,d,e,f,h=D(),i=this;if(h.hide(),a=k.valOrDefault(a,!0),c=G(),d=c,e=b>0?d.multipage:r>0&&g.steps[r-1].multipage,f=function(c,d){var f;if(-1===c)return this.endTour(!0);if(a&&(f=b>0?k.invokeEventCallbacks("next",d.onNext):k.invokeEventCallbacks("prev",d.onPrev)),c===r){if(e)return void N();f=k.valOrDefault(f,!0),f?this.showStep(c):this.endTour(!1)}},!e&&F("skipIfNoElement"))I(b,function(a){f.call(i,a,d)});else if(r+b>=0&&r+b<g.steps.length){if(r+=b,c=G(),!k.getStepTarget(c)&&!e)return k.invokeEventCallbacks("error"),d.showNextButton?this.endTour(!0,!1,!0):this.endTour(!0,!1);f.call(this,r,d)}else if(r+b===g.steps.length)return this.endTour();return this},K=function(a){var b,c,d,e={};for(b in a)a.hasOwnProperty(b)&&"id"!==b&&"steps"!==b&&(e[b]=a[b]);return A.call(this,e,!0),c=k.getState(F("cookieName")),c&&(d=c.split(":"),w=d[0],x=d[1],d.length>2&&(C=d[2].split(",")),x=parseInt(x,10)),this},L=function(a,b,c){var d,e;if(r=a||0,B=b||{},d=G(),e=k.getStepTarget(d))return void c(r);if(!e){if(k.invokeEventCallbacks("error"),B[r]=!0,F("skipIfNoElement"))return void I(1,c);r=-1,c(r)}},M=function(a){function b(){d.show(),k.invokeEventCallbacks("show",c.onShow)}var c=g.steps[a],d=D();k.getStepTarget(c);r=a,d.hide(!1),d.render(c,a,function(a){a?H(b):b()}),N()},N=function(){var a=g.id+":"+r,b=p.getSkippedStepsIndexes();b&&b.length>0&&(a+=":"+b.join(",")),k.setState(F("cookieName"),a,1)},O=function(a){a&&this.configure(a)};this.getCalloutManager=function(){return typeof c===s&&(c=new f),c},this.startTour=function(a,b){var c,d,e={},f=this;if(!g||n){if(!a)throw new Error("Tour data is required for startTour.");if(!a.id||!z.test(a.id))throw new Error("Tour ID is using an invalid format. Use alphanumeric, underscores, and/or hyphens only. First character must be a letter.");n=!1,g=a,K.call(this,a)}if(typeof b!==s){if(b>=g.steps.length)throw new Error("Specified step number out of bounds.");d=b}if(!k.documentIsReady())return t=!0,this;if("undefined"==typeof d&&g.id===w&&typeof x!==s){if(d=x,C.length>0)for(var h=0,i=C.length;i>h;h++)e[C[h]]=!0}else d||(d=0);return L(d,e,function(a){var b=-1!==a&&k.getStepTarget(g.steps[a]);return b?(k.invokeEventCallbacks("start"),c=D(),c.hide(!1),f.isActive=!0,void(k.getStepTarget(G())?f.showStep(a):(k.invokeEventCallbacks("error"),F("skipIfNoElement")&&f.nextStep(!1)))):void f.endTour(!1,!1)}),this},this.showStep=function(a){var b=g.steps[a],c=r;return k.getStepTarget(b)?(b.delay?setTimeout(function(){M(a)},b.delay):M(a),this):(r=a,k.invokeEventCallbacks("error"),void(r=c))},this.prevStep=function(a){return J.call(this,a,-1),this},this.nextStep=function(a){return J.call(this,a,1),this},this.endTour=function(a,b,c){var d=D();return a=k.valOrDefault(a,!0),b=k.valOrDefault(b,!0),r=0,x=void 0,d.hide(),a&&k.clearState(F("cookieName")),this.isActive&&(this.isActive=!1,g&&b&&k.invokeEventCallbacks("end")),this.removeCallbacks(null,!0),this.resetDefaultOptions(),E(),c?n=!0:g=null,this},this.getCurrTour=function(){return g},this.getCurrTarget=function(){return k.getStepTarget(G())},this.getCurrStepNum=function(){return r},this.getSkippedStepsIndexes=function(){var a,b=[];for(a in B)b.push(a);return b},this.refreshBubblePosition=function(){var a=G();return a&&D().setPosition(a),this.getCalloutManager().refreshCalloutPositions(),this},this.listen=function(a,b,c){return a&&l[a].push({cb:b,fromTour:c}),this},this.unlisten=function(a,b){for(var c,d,e=l[a],c=0,d=e.length;d>c;++c)e[c].cb===b&&e.splice(c,1);return this},this.removeCallbacks=function(a,b){var c,d,e,f;for(f in l)if(!a||a===f)if(b)for(c=l[f],d=0,e=c.length;e>d;++d)c[d].fromTour&&(c.splice(d--,1),--e);else l[f]=[];return this},this.registerHelper=function(a,b){"string"==typeof a&&"function"==typeof b&&(m[a]=b)},this.unregisterHelper=function(a){m[a]=null},this.invokeHelper=function(a){var b,c,d=[];for(b=1,c=arguments.length;c>b;++b)d.push(arguments[b]);m[a]&&m[a].call(null,d)},this.setCookieName=function(a){return d.cookieName=a,this},this.resetDefaultOptions=function(){return d={},this},this.resetDefaultI18N=function(){return h={},this},this.getState=function(){return k.getState(F("cookieName"))},A=function(a,b){var c,e,f,g,i=["next","prev","start","end","show","error","close"];for(d||this.resetDefaultOptions(),k.extend(d,a),a&&k.extend(h,a.i18n),f=0,g=i.length;g>f;++f)e="on"+i[f].charAt(0).toUpperCase()+i[f].substring(1),a[e]&&this.listen(i[f],a[e],b);return c=D(!0),this},this.configure=function(a){return A.call(this,a,!1)},this.setRenderer=function(a){var b=typeof a;return"string"===b?(q=a,i=void 0):"function"===b&&(i=a),this},this.setEscaper=function(a){return"function"==typeof a&&(j=a),this},O.call(this,a)},p=new d,function(){var a={};a.escape=function(a){return j?j(a):null==a?"":(""+a).replace(new RegExp("[&<>\"']","g"),function(a){return"&"==a?"&amp;":"<"==a?"&lt;":">"==a?"&gt;":'"'==a?"&quot;":"'"==a?"&#x27;":void 0})},this.templates=this.templates||{},this.templates.bubble_default=function(b){function c(b,c){return c?a.escape(b):b}var d,e="";a.escape,Array.prototype.join;e+="\r\n";var f=b.i18n,g=b.buttons,h=b.step,i=b.tour;return e+='\r\n<div class="hopscotch-bubble-container" style="width: '+(null==(d=h.width)?"":d)+"px; padding: "+(null==(d=h.padding)?"":d)+'px;">\r\n  ',i.isTour&&(e+='<span class="hopscotch-bubble-number">'+(null==(d=f.stepNum)?"":d)+"</span>"),e+='\r\n  <div class="hopscotch-bubble-content">\r\n    ',""!==h.title&&(e+='<h3 class="hopscotch-title">'+(null==(d=c(h.title,i.unsafe))?"":d)+"</h3>"),e+="\r\n    ",""!==h.content&&(e+='<div class="hopscotch-content">'+(null==(d=c(h.content,i.unsafe))?"":d)+"</div>"),e+='\r\n  </div>\r\n  <div class="hopscotch-actions">\r\n    ',g.showPrev&&(e+='<button class="hopscotch-nav-button prev hopscotch-prev">'+(null==(d=f.prevBtn)?"":d)+"</button>"),e+="\r\n    ",g.showCTA&&(e+='<button class="hopscotch-nav-button next hopscotch-cta">'+(null==(d=g.ctaLabel)?"":d)+"</button>"),e+="\r\n    ",g.showNext&&(e+='<button class="hopscotch-nav-button next hopscotch-next">'+(null==(d=f.nextBtn)?"":d)+"</button>"),e+="\r\n  </div>\r\n  ",g.showClose&&(e+='<button class="hopscotch-bubble-close hopscotch-close">'+(null==(d=f.closeTooltip)?"":d)+"</button>"),e+='\r\n</div>\r\n<div class="hopscotch-bubble-arrow-container hopscotch-arrow">\r\n  <div class="hopscotch-bubble-arrow-border"></div>\r\n  <div class="hopscotch-bubble-arrow"></div>\r\n</div>\r\n'}}.call(p),p})}(Shortcuts4Js||(Shortcuts4Js={}));